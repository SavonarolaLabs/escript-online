import{s as _,e as g,a as y,c as m,g as f,b as C,i as d,l as w,n as p,d as h,r as b,o as v}from"../chunks/scheduler.acaf567e.js";import{S as U,i as x}from"../chunks/index.5c00e781.js";import{o as S}from"../chunks/auth0-spa-js.production.esm.ce0ccc5c.js";function P(l){let t,s="Login with GitHub",n,a,i="Logout",c,r;return{c(){t=g("button"),t.textContent=s,n=y(),a=g("button"),a.textContent=i},l(e){t=m(e,"BUTTON",{"data-svelte-h":!0}),f(t)!=="svelte-6w1jeg"&&(t.textContent=s),n=C(e),a=m(e,"BUTTON",{"data-svelte-h":!0}),f(a)!=="svelte-hd9vso"&&(a.textContent=i)},m(e,u){d(e,t,u),d(e,n,u),d(e,a,u),c||(r=[w(t,"click",l[2]),w(a,"click",l[1])],c=!0)},p,i:p,o:p,d(e){e&&(h(t),h(n),h(a)),c=!1,b(r)}}}let T="https://escript.online";function k(l){let t=null;v(async()=>{await a(),await t?.isAuthenticated()?(console.log("> User is authenticated"),i()):(console.log("> User not authenticated"),i());const e=window.location.search;if(e.includes("code=")&&e.includes("state=")){try{const o=await t?.handleRedirectCallback();o&&o.appState&&o.appState.targetUrl&&window.history.replaceState({},document.title,o.appState.targetUrl),console.log("Logged in!")}catch(o){console.log("Error parsing redirect:",o)}window.history.replaceState({},document.title,"/")}});const s=async r=>{await t?.loginWithRedirect({authorizationParams:{redirect_uri:"https://escript.online/"}})},n=async()=>{await t?.logout({logoutParams:{returnTo:T}})},a=async()=>{t=await S({domain:"dev-p2vt4a2r3z7lnna4.us.auth0.com",clientId:"uxd2OTEJV5e94Qszy0MyMPPZnbbh5S2U"})},i=()=>{};return[s,n,()=>s()]}class L extends U{constructor(t){super(),x(this,t,k,P,_,{})}}export{L as component};
